#!/bin/bash

# A simple script that starts up a jupyter server if not running, or opens the
# browser if one is already running

tmux has-session -t jupyter 1>/dev/null 2>&1
returncode=$?

if [ $returncode -ne 0 ]; then
    echo jupyter is not running
    tmux new-session -d -s "jupyter" -c ~/code
    # Want jupyter to open in a new window?
    # Open the jupyter config in
    #   ~/.jupyter/jupyter_notebook_config.py
    # or generate the config with
    #   jupyter-notebook --generate-config
    # and edit the c.NotebookApp.browser and c.NotebookApp.webbrowser_open_new
    # values to your liking.
    tmux send-keys 'source jupyter-venv/bin/activate && jupyter-lab' 'C-m'
    tmux rename-window "jupyter"
else
    echo jupyter is already running, starting web browser
    chromium-browser http://localhost:8888/lab
fi
